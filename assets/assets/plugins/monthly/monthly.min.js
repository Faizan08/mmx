!function(t){"use strict";t.fn.extend({monthly:function(e){function a(t,e){return 2===t?3&e||!(e%25)&&15&e?28:29:30+(t+(t>>3)&1)}function n(e,n){t(D).data("setMonth",e).data("setYear",n);var o=0,r=a(e,n),s=e-1,d=new Date(n,s,1,0,0,0,0).getDay(),m=e===I&&n===x;t(D+" .monthly-day, "+D+" .monthly-day-blank").remove(),t(D+" .monthly-event-list, "+D+" .monthly-day-wrap").empty();for(var c=1;r>=c;c++){var h=b.stylePast&&(x>n||n===x&&(I>e||e===I&&S>c)),v='<div class="monthly-day-number">'+c+'</div><div class="monthly-indicator-wrap"></div>';if("event"===b.mode){var u=new Date(n,s,c,0,0,0,0).getDay();t(D+" .monthly-day-wrap").append("<div"+i("class","m-d monthly-day monthly-day-event"+(h?" monthly-past-day":""))+i("data-number",c)+">"+v+"</div>"),t(D+" .monthly-event-list").append("<div"+i("class","monthly-list-item")+i("id",k+"day"+c)+i("data-number",c)+'><div class="monthly-event-list-date">'+W[u]+"<br>"+c+"</div></div>")}else t(D+" .monthly-day-wrap").append("<a"+i("href","#")+i("class","m-d monthly-day monthly-day-pick"+(h?" monthly-past-day":""))+i("data-number",c)+">"+v+"</a>")}m&&t(D+' *[data-number="'+S+'"]').addClass("monthly-today"),t(D+" .monthly-header-title").html('<a href="#" class="monthly-header-title-date" onclick="return false">'+P[e-1]+" "+n+"</a>"+(m?"":'<a href="#" class="monthly-reset"></a>')),j?0===d?y(6):1!==d&&y(d-1):7!==d&&y(d);var f=t(D+" .monthly-day").length,p=t(D+" .monthly-day-blank").length,g=f+p,w=7*Math.ceil(g/7),T=w-g;if(g%7!==0)for(o=0;T>o;o++)t(D+" .monthly-day-wrap").append(U);"event"===b.mode&&l(e,n);var M=t(D+" .m-d");for(o=0;o<M.length;o+=7)M.slice(o,o+7).wrapAll('<div class="monthly-week"></div>')}function o(e,n,o){var l=v(e,"startdate"),r=v(e,"enddate"),s=l.split("-"),d=parseInt(s[0],10),m=parseInt(s[1],10),c=parseInt(s[2],10),h=c,y=c,f=c,p=m===n&&d===o,g=p;if(r){var w=r.split("-"),k=parseInt(w[0],10),T=parseInt(w[1],10),I=parseInt(w[2],10),x=o>d||n>m&&d===o,S=T===n&&k===o,M=k>o||T>n&&k===o;(p||S||x&&M)&&(g=!0,h=p?c:1,y=S?I:a(n,o),f=p?h:1)}if(g){var C=v(e,"starttime"),F="",P=v(e,"url"),W=v(e,"name"),U=v(e,"class"),j=v(e,"color"),N=v(e,"id"),Y=U?" "+U:"",A="<div",E="</span></div>";if(C){var L=v(e,"endtime");F='<div><div class="monthly-list-time-start">'+u(C)+"</div>"+(L?'<div class="monthly-list-time-end">'+u(L)+"</div>":"")+"</div>"}b.linkCalendarToEventUrl&&P&&(A="<a"+i("href",P),E="</span></a>");for(var H=A+i("data-eventid",N)+i("title",W)+(j?i("style","background:"+j+";color:"+j):""),J="<a"+i("href",P)+i("class","listed-event"+Y)+i("data-eventid",N)+(j?i("style","background:"+j):"")+i("title",W)+">"+W+" "+F+"</a>",O=h;y>=O;O++){var q=O===f;t(D+' *[data-number="'+O+'"] .monthly-indicator-wrap').append(H+i("class","monthly-event-indicator"+Y+(q?"":" monthly-event-continued"))+"><span>"+(q?W:"")+E),t(D+' .monthly-list-item[data-number="'+O+'"]').addClass("item-has-event").append(J)}}}function l(e,a){if(b.events)r(b.events,e,a);else{var n="xml"===b.dataType?b.xmlUrl:b.jsonUrl;if(n){var o=String(n).replace("{month}",e).replace("{year}",a);t.get(o,{now:t.now()},function(t){r(t,e,a)},b.dataType).fail(function(){console.error("Monthly.js failed to import "+n+". Please check for the correct path and "+b.dataType+" syntax.")})}}}function r(e,a,n){"xml"===b.dataType?t(e).find("event").each(function(t,e){o(e,a,n)}):"json"===b.dataType&&t.each(e.monthly,function(t,e){o(e,a,n)})}function i(t,e){for(var a=String(e),n="",o=0;o<a.length;o++)switch(a[o]){case"'":n+="&#39;";break;case'"':n+="&quot;";break;case"<":n+="&lt;";break;case">":n+="&gt;";break;default:n+=a[o]}return" "+t+'="'+n+'"'}function s(e){var a=e?1:0,n="",o=0;for(o=0;6>o;o++)n+="<div>"+W[o+a]+"</div>";n+="<div>"+W[e?0:6]+"</div>",t(D).append('<div class="monthly-day-title-wrap">'+n+'</div><div class="monthly-day-wrap"></div>')}function d(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language}function m(){if("undefined"==typeof Intl)return["Jan","Feb","Mar","Apr","May","June","Jul","Aug","Sep","Oct","Nov","Dec"];for(var t=new Intl.DateTimeFormat(M,{month:C}),e=[],a=0;12>a;a++){var n=new Date(2017,a,1,0,0,0);e[a]=t.format(n)}return e}function c(t,e,a){return b.useIsoDateFormat?new Date(t,e-1,a,0,0,0).toISOString().substring(0,10):"undefined"==typeof Intl?e+"/"+a+"/"+t:new Intl.DateTimeFormat(M).format(new Date(t,e-1,a,0,0,0))}function h(){if("undefined"==typeof Intl)return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var t=new Intl.DateTimeFormat(M,{weekday:F}),e=[],a=0,n=null;for(a=0;7>a;a++)n=new Date(2017,0,a+1,0,0,0),e[a]=t.format(n);return e}function y(e){var a=t(D+" .monthly-day-wrap"),n=0;for(n=0;e>n;n++)a.prepend(U)}function v(e,a){return"xml"===b.dataType?t(e).find(a).text():e[a]}function u(t){var e=t.split(":"),a=parseInt(e[0],10),n="AM";return a>12?(a-=12,n="PM"):0===a&&(a=12),a+":"+String(e[1])+" "+n}function f(){var e=t(D).data("setMonth"),a=t(D).data("setYear"),o=12===e?1:e+1,l=12===e?a+1:a;n(o,l),g()}function p(){var e=t(D).data("setMonth"),a=t(D).data("setYear"),o=1===e?12:e-1,l=1===e?a-1:a;n(o,l),g()}function g(){t(D+" .monthly-event-list").is(":visible")&&(t(D+" .monthly-cal").remove(),t(D+" .monthly-header-title").prepend('<a href="#" class="monthly-cal"></a>'))}var w={dataType:"html",disablePast:!1,eventList:!0,events:"",jsonUrl:"",linkCalendarToEventUrl:!1,maxWidth:!1,mode:"event",setWidth:!1,showTrigger:"",startHidden:!1,stylePast:!1,target:"",useIsoDateFormat:!1,weekStart:0,xmlUrl:""},b=t.extend(w,e),k=t(this).attr("id"),D="#"+k,T=new Date,I=T.getMonth()+1,x=T.getFullYear(),S=T.getDate(),M=(b.locale||d()).toLowerCase(),C=b.monthNameFormat||"short",F=b.weekdayNameFormat||"short",P=b.monthNames||m(),W=b.dayNames||h(),U='<div class="m-d monthly-day-blank"><div class="monthly-day-number"></div></div>',j="Mon"===b.weekStart||1===b.weekStart||"1"===b.weekStart,N=M.substring(0,2).toLowerCase();b.maxWidth!==!1&&t(D).css("maxWidth",b.maxWidth),b.setWidth!==!1&&t(D).css("width",b.setWidth),b.startHidden&&(t(D).addClass("monthly-pop").css({display:"none",position:"absolute"}),t(document).on("focus",String(b.showTrigger),function(e){t(D).show(),e.preventDefault()}),t(document).on("click",String(b.showTrigger)+", .monthly-pop",function(t){t.stopPropagation(),t.preventDefault()}),t(document).on("click",function(){t(D).hide()})),s(j),t(D).addClass("monthly-locale-"+N+" monthly-locale-"+M),t(D).prepend('<div class="monthly-header"><div class="monthly-header-title"><a href="#" class="monthly-header-title-date" onclick="return false"></a></div><a href="#" class="monthly-prev"></a><a href="#" class="monthly-next"></a></div>').append('<div class="monthly-event-list"></div>'),n(I,x),t(document.body).on("click",D+" .monthly-next",function(t){f(),t.preventDefault()}),t(document.body).on("click",D+" .monthly-prev",function(t){p(),t.preventDefault()}),t(document.body).on("click",D+" .monthly-reset",function(e){t(this).remove(),n(I,x),g(),e.preventDefault(),e.stopPropagation()}),t(document.body).on("click",D+" .monthly-cal",function(e){t(this).remove(),t(D+" .monthly-event-list").css("transform","scale(0)"),setTimeout(function(){t(D+" .monthly-event-list").hide()},250),e.preventDefault()}),t(document.body).on("click touchstart",D+" .monthly-day",function(e){var a=t(this).data("number");if("event"===b.mode&&b.eventList){var n=t(D+" .monthly-event-list"),o=document.getElementById(k+"day"+a),l=o.offsetTop;n.show(),n.css("transform"),n.css("transform","scale(1)"),t(D+' .monthly-list-item[data-number="'+a+'"]').show(),n.scrollTop(l),g(),b.linkCalendarToEventUrl||e.preventDefault()}else if("picker"===b.mode){var r=t(D).data("setMonth"),i=t(D).data("setYear");t(this).hasClass("monthly-past-day")&&b.disablePast?e.preventDefault():(t(String(b.target)).val(c(i,r,a)),b.startHidden&&t(D).hide()),e.preventDefault()}}),t(document.body).on("click",D+" .listed-event",function(e){var a=t(this).attr("href");a||e.preventDefault()})}})}(jQuery);